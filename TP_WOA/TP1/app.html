<!doctype html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Untitled Document</title>
    <script>
        var Observer = function () {
            this.update = function () {
                console.log('update');
            }
        };

        var Subject = function () {
            var observers = [];
            this.notify = function () {
                for (observerKey in observers) {
                    var observer = observers[observerKey];
                    observer.update();
                }
            }
            this.attach = function (observer) {
                observers.unshift(observer);
            }
        };

        var Vue = function(model) {
            Observer.call(this);
            this.model = model;
            this.update = function () {
                window.document.getElementById('compteur').value=model.time;          
            }
        }

        Vue.prototype = Object.create(Observer.prototype);

        var Model = function () {
            Subject.call(this);
            this.data = {};
            this.time=0;
            function iteration(){
                //console.log(this);
                this.time = this.time+1;
                this.notify();
            };
            //standard context of callbak function used by setInterval is Window
            setInterval(iteration.bind(this),1000);
        };
        
        Model.prototype = Object.create(Subject.prototype);
        
        var model = new Model();
        var Vue = new Vue(model);
        model.attach(Vue);
        
    </script>
</head>

<body>

<input type="text" id="compteur"/>

</body>

</html>
